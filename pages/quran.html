<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Al-Qur'an</title>

<link rel="stylesheet" href="../style.css">
</head>

<body>

<header class="app-header">
  <button class="back-btn" onclick="history.back()">
    <svg viewBox="0 0 24 24" width="22" height="22"
      fill="none"
      stroke="currentColor"
      stroke-width="2.5"
      stroke-linecap="round"
      stroke-linejoin="round">
      <polyline points="15 18 9 12 15 6"></polyline>
    </svg>
  </button>
  <h1 class="header-title">Al-Qur'an</h1>
</header>

<main class="container">

<div class="quran-toggle">
  <button id="btnSurah" class="toggle-btn active">Surah</button>
  <button id="btnJuz" class="toggle-btn">Juz</button>
  <button id="btnBookmark" class="toggle-btn">Bookmark</button>
</div>

  <div id="surahList" class="surah-list"></div>

</main>

<nav class="bottom-nav">
  <a href="../index.html">Home</a>
  <a href="quran.html">Al-Qur'an</a>
  <a href="bookmark.html">Bookmark</a>
  <a href="about.html">Tentang</a>
</nav>

  <script src="../data/juz-map.js"></script>
  <script src="../data/surah-names.js"></script>
  
<script>
const list = document.getElementById('surahList');
const btnSurah = document.getElementById('btnSurah');
const btnJuz = document.getElementById('btnJuz');

const params = new URLSearchParams(location.search);
const mode = params.get('mode');

if (mode === 'juz') {
  setActive(btnJuz);
  loadJuz();
} else {
  setActive(btnSurah);
  loadSurah();
}


btnSurah.onclick = () => {
  setActive(btnSurah, btnJuz);
  loadSurah();
};

btnJuz.onclick = () => {
  setActive(btnJuz, btnSurah);
  loadJuz();
};

const btnBookmark = document.getElementById('btnBookmark');

btnBookmark.onclick = () => {
  window.location.href = 'bookmark.html';
};

function setActive(btn) {
  document
    .querySelectorAll('.toggle-btn')
    .forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
}

function loadSurah() {
  list.innerHTML = 'Memuat surah...';

  fetch('https://equran.id/api/v2/surat')
    .then(res => res.json())
    .then(data => {
      list.innerHTML = '';
      data.data.forEach(s => {
        const item = document.createElement('a');
        item.href = `surah.html?no=${s.nomor}`;
        item.className = 'surah-item';
        item.innerHTML = `
          <div>
            <strong>${s.nomor}. ${s.namaLatin}</strong>
            <small>${s.arti}</small>
          </div>
          <span>${s.jumlahAyat} ayat</span>
        `;
        list.appendChild(item);
      });
    })
    .catch(() => list.innerHTML = '<p>Gagal memuat Surah</p>');
}

function loadJuz() {
  list.innerHTML = '';

  JUZ_MAP.forEach(j => {
    const item = document.createElement('a');
    item.href = `juz.html?no=${j.juz}`;
    item.className = 'surah-item';

    const surahName = getSurahName(j.start[0]);
    const ayatNo = j.start[1];

    item.innerHTML = `
      <div>
        <strong>Juz ${j.juz}</strong>
        <small>Mulai dari ${surahName} ayat ${ayatNo}</small>
      </div>
    `;

    list.appendChild(item);
  });
}

  function getSurahName(no) {
  return SURAH_NAMES[no] || `Surah ${no}`;
}


</script>


</body>
</html>
